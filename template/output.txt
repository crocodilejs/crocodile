
  ✖ POST otp/disable > invalid blank password Rejected promise returned by test
  ✖ POST otp/login > invalid OTP passcode Rejected promise returned by test
  ✔ POST otp/setup > invalid blank password (226ms)
  ✔ POST otp/setup > incorrect password (1.6s)
  ✔ POST otp/disable > incorrect password (1.6s)
  ✔ POST otp/recovery > successful (1.6s)
  ✔ POST otp/setup > successful with token (1.6s)
  ✔ POST otp/keys > successful (1.5s)
  ✔ POST otp/disable > successful (1.6s)
  ✔ POST otp/keys > recovery keys reset (1.6s)
  ✔ GET otp/setup > successful (1.6s)
  ✔ POST otp/setup > invalid token (1.7s)
  ✔ POST otp/setup > successful (1.7s)
  ✔ GET otp/login > successful (1.9s)
  ✔ POST otp/keys > invalid recovery key (219ms)
  ✔ GET otp/keys > successful (227ms)
  ✔ POST otp/login > successful
  ─

  POST otp/disable > invalid blank password

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/login > invalid OTP passcode

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)

  ─

  2 tests failed

  ✔ POST otp/login > invalid OTP passcode (227ms)
  ✔ POST otp/login > successful (282ms)
  ✔ POST otp/setup > invalid blank password (266ms)
  ✔ POST otp/keys > invalid recovery key (267ms)
  ✔ POST otp/disable > incorrect password (1.3s)
  ✔ POST otp/recovery > successful (1.3s)
  ✔ POST otp/setup > successful with token (1.4s)
  ✔ GET otp/login > successful (1.3s)
  ✔ POST otp/keys > recovery keys reset (1.3s)
  ✔ POST otp/setup > invalid token (1.4s)
  ✔ POST otp/disable > successful (1.4s)
  ✔ POST otp/setup > successful (1.4s)
  ✔ POST otp/setup > incorrect password (1.5s)
  ✔ POST otp/keys > successful (255ms)
  ✔ POST otp/disable > invalid blank password (1.7s)
  ✔ GET otp/keys > successful (254ms)
  ✔ GET otp/setup > successful (165ms)
  ─

  17 tests passed

  ✖ POST otp/setup > invalid token Rejected promise returned by test
  ✖ POST otp/setup > successful Rejected promise returned by test
  ✖ POST otp/setup > incorrect password Rejected promise returned by test
  ✔ POST otp/disable > invalid blank password (316ms)
  ✔ POST otp/login > invalid OTP passcode (297ms)
  ✔ POST otp/login > successful (321ms)
  ✔ POST otp/keys > invalid recovery key (296ms)
  ✔ POST otp/setup > invalid blank password (291ms)
  ✔ POST otp/recovery > successful (1s)
  ✔ POST otp/setup > successful with token (1s)
  ✔ POST otp/keys > recovery keys reset (890ms)
  ✔ POST otp/disable > incorrect password (1.4s)
  ✔ GET otp/login > successful (1.4s)
  ✔ GET otp/keys > successful (379ms)
  ✔ POST otp/keys > successful (383ms)
  ✔ POST otp/disable > successful (1.4s)
  ✔ GET otp/setup > successful (193ms)
  ─

  POST otp/setup > invalid token

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/setup > successful

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/setup > incorrect password

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)

  ─

  3 tests failed

  ✖ POST otp/recovery > successful Rejected promise returned by test
  ✖ POST otp/setup > invalid blank password Rejected promise returned by test
  ✖ POST otp/setup > successful Rejected promise returned by test
  ✖ POST otp/setup > invalid token Rejected promise returned by test
  ✔ POST otp/keys > invalid recovery key (207ms)
  ✔ POST otp/login > invalid OTP passcode (733ms)
  ✔ POST otp/disable > invalid blank password (969ms)
  ✔ GET otp/setup > successful (1.1s)
  ✔ POST otp/disable > incorrect password (1s)
  ✔ POST otp/disable > successful (1.1s)
  ✔ POST otp/setup > successful with token (1.1s)
  ✔ POST otp/keys > successful (1.1s)
  ✔ POST otp/keys > recovery keys reset (1s)
  ✔ GET otp/keys > successful (256ms)
  ✔ POST otp/setup > incorrect password (331ms)
  ✔ GET otp/login > successful (1.4s)
  ✔ POST otp/login > successful
  ─

  POST otp/recovery > successful

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/setup > invalid blank password

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/setup > successful

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/setup > invalid token

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)

  ─

  4 tests failed

  ✖ GET otp/setup > successful Rejected promise returned by test
  ✔ POST otp/login > invalid OTP passcode (301ms)
  ✔ POST otp/login > successful (378ms)
  ✔ POST otp/disable > invalid blank password (315ms)
  ✔ POST otp/keys > invalid recovery key (320ms)
  ✔ POST otp/setup > successful with token (505ms)
  ✔ POST otp/recovery > successful (413ms)
  ✔ POST otp/setup > incorrect password (1.3s)
  ✔ POST otp/disable > incorrect password (1.3s)
  ✔ POST otp/setup > invalid token (1.4s)
  ✔ POST otp/disable > successful (1.4s)
  ✔ POST otp/setup > successful (1.4s)
  ✔ POST otp/keys > successful (311ms)
  ✔ POST otp/setup > invalid blank password (1.7s)
  ✔ GET otp/keys > successful (316ms)
  ✔ POST otp/keys > recovery keys reset (1.5s)
  ✔ GET otp/login > successful (191ms)
  ─

  GET otp/setup > successful

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)

  ─

  1 test failed

  ✔ POST otp/setup > invalid blank password (220ms)
  ✔ POST otp/disable > invalid blank password (299ms)
  ✔ POST otp/login > successful (928ms)
  ✔ POST otp/keys > invalid recovery key (921ms)
  ✔ POST otp/setup > successful with token (1.3s)
  ✔ POST otp/recovery > successful (1.3s)
  ✔ POST otp/keys > successful (1.3s)
  ✔ POST otp/disable > incorrect password (1.4s)
  ✔ POST otp/keys > recovery keys reset (1.4s)
  ✔ GET otp/login > successful (1.4s)
  ✔ POST otp/disable > successful (1.4s)
  ✔ POST otp/setup > invalid token (1.5s)
  ✔ POST otp/setup > successful (1.5s)
  ✔ GET otp/keys > successful (263ms)
  ✔ POST otp/login > invalid OTP passcode (1.8s)
  ✔ POST otp/setup > incorrect password (351ms)
  ✔ GET otp/setup > successful (172ms)
  ─

  17 tests passed

  ✔ POST otp/login > invalid OTP passcode (197ms)
  ✔ POST otp/keys > invalid recovery key (813ms)
  ✔ POST otp/disable > invalid blank password (811ms)
  ✔ POST otp/login > successful (908ms)
  ✔ GET otp/login > successful (1.3s)
  ✔ POST otp/recovery > successful (1.3s)
  ✔ POST otp/disable > incorrect password (1.4s)
  ✔ POST otp/setup > successful with token (1.4s)
  ✔ POST otp/setup > invalid token (1.4s)
  ✔ POST otp/disable > successful (1.4s)
  ✔ POST otp/setup > incorrect password (1.7s)
  ✔ POST otp/keys > successful (310ms)
  ✔ GET otp/keys > successful (306ms)
  ✔ POST otp/setup > invalid blank password (1.7s)
  ✔ POST otp/keys > recovery keys reset (1.6s)
  ✔ POST otp/setup > successful (1.7s)
  ✔ GET otp/setup > successful (187ms)
  ─

  17 tests passed

  ✖ GET otp/login > successful Rejected promise returned by test
  ✔ POST otp/setup > invalid blank password (196ms)
  ✔ POST otp/login > invalid OTP passcode (241ms)
  ✔ POST otp/keys > invalid recovery key (753ms)
  ✔ POST otp/disable > invalid blank password (787ms)
  ✔ GET otp/setup > successful (1.3s)
  ✔ POST otp/setup > successful with token (1.3s)
  ✔ POST otp/keys > recovery keys reset (1.2s)
  ✔ POST otp/keys > successful
  ✔ POST otp/setup > incorrect password (1.4s)
  ✔ POST otp/setup > invalid token (1.4s)
  ✔ POST otp/disable > incorrect password (1.7s)
  ✔ POST otp/disable > successful (1.6s)
  ✔ POST otp/recovery > successful (1.8s)
  ✔ GET otp/keys > successful (511ms)
  ✔ POST otp/setup > successful (1.8s)
  ✔ POST otp/login > successful
  ─

  GET otp/login > successful

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)

  ─

  1 test failed

  ✖ POST otp/disable > successful Rejected promise returned by test
  ✖ POST otp/recovery > successful Rejected promise returned by test
  ✖ POST otp/login > invalid OTP passcode Rejected promise returned by test
  ✖ POST otp/disable > incorrect password Rejected promise returned by test
  ✖ POST otp/setup > invalid token Rejected promise returned by test
  ✖ GET otp/setup > successful Rejected promise returned by test
  ✔ POST otp/login > successful (174ms)
  ✔ POST otp/disable > invalid blank password (161ms)
  ✔ POST otp/keys > invalid recovery key (177ms)
  ✔ POST otp/setup > successful with token (289ms)
  ✔ POST otp/keys > recovery keys reset (208ms)
  ✔ POST otp/keys > successful (150ms)
  ✔ GET otp/keys > successful (832ms)
  ✔ POST otp/setup > invalid blank password (1.2s)
  ✔ POST otp/setup > incorrect password (877ms)
  ✔ POST otp/setup > successful (1.2s)
  ✔ GET otp/login > successful (214ms)
  ─

  POST otp/disable > successful

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/recovery > successful

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/login > invalid OTP passcode

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/disable > incorrect password

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  POST otp/setup > invalid token

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:5
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)



  GET otp/setup > successful

  Rejected promise returned by test. Reason:

  Error {
    message: 'ECONNREFUSED: Connection refused',
  }

  › Test.assert (node_modules/supertest/lib/test.js:165:15)
  › localAssert (node_modules/supertest/lib/test.js:131:12)
  › node_modules/supertest/lib/test.js:128:
  › Test.Request.callback (node_modules/supertest/node_modules/superagent/lib/node/index.js:728:3)
  › ClientRequest.<anonymous> (node_modules/supertest/node_modules/superagent/lib/node/index.js:647:10)
  › emitErrorNT (internal/streams/destroy.js:92:8)
  › emitErrorAndCloseNT (internal/streams/destroy.js:60:3)

  ─

  6 tests failed

  ✔ POST otp/setup > invalid blank password (778ms)
  ✔ POST otp/login > invalid OTP passcode (805ms)
  ✔ POST otp/disable > invalid blank password (806ms)
  ✔ POST otp/keys > invalid recovery key (802ms)
  ✔ POST otp/recovery > successful (1s)
  ✔ POST otp/keys > recovery keys reset (1s)
  ✔ POST otp/setup > successful with token (1s)
  ✔ POST otp/keys > successful
  ✔ GET otp/setup > successful (1.6s)
  ✔ POST otp/setup > incorrect password (1.6s)
  ✔ POST otp/disable > incorrect password (1.6s)
  ✔ POST otp/setup > invalid token (1.7s)
  ✔ POST otp/disable > successful (1.7s)
  ✔ POST otp/setup > successful (1.9s)
  ✔ POST otp/login > successful (1.9s)
  ✔ GET otp/keys > successful (898ms)
  ✔ GET otp/login > successful (158ms)
  ─

  17 tests passed
